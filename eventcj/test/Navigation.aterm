CompilationUnit(
  Some(PackageDec([], PackageName([Id("main")])))
, []
, [ ClassDec(
      ClassDecHead(
        []
      , Id("Navigation")
      , None()
      , Some(SuperDec(ClassType(TypeName(Id("MapActivity")), None())))
      , Some(
          ImplementsDec(
            [ InterfaceType(TypeName(Id("Runnable")), None())
            , InterfaceType(TypeName(Id("LocationListener")), None())
            ]
          )
        )
      )
    , ClassBody(
        [ FieldDec(
            []
          , ClassOrInterfaceType(TypeName(Id("MapView")), None())
          , [VarDec(Id("mapView"))]
          )
        , FieldDec(
            []
          , ClassOrInterfaceType(TypeName(Id("MyLocationOverlay")), None())
          , [VarDec(Id("overlay"))]
          )
        , FieldDec(
            []
          , ClassOrInterfaceType(TypeName(Id("WifiManager")), None())
          , [VarDec(Id("wifiManager"))]
          )
        , FieldDec(
            []
          , ClassOrInterfaceType(TypeName(Id("BuildingGuide")), None())
          , [VarDec(Id("buildingGuide"))]
          )
        , MethodDec(
            MethodDecHead([], None(), Void(), Id("onStatusChanged"), [], None())
          , Block([])
          )
        , MethodDec(
            MethodDecHead([], None(), Void(), Id("run"), [], None())
          , Block([])
          )
        , MethodDec(
            MethodDecHead(
              []
            , None()
            , Void()
            , Id("onCreate")
            , [Param(
                 []
               , ClassOrInterfaceType(TypeName(Id("Bundle")), None())
               , Id("status")
               )]
            , None()
            )
          , Block(
              [ ExprStm(
                  Invoke(
                    Method(MethodName(AmbName(Id("overlay")), Id("runOnFirstFix")))
                  , [This()]
                  )
                )
              ]
            )
          )
        , Layer(
            Id("GPSNavi")
          , [ Activation(
                Block(
                  [ ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("overlay")), Id("onProviderEnabled")))
                      , [Lit(String([Chars("gps")]))]
                      )
                    )
                  ]
                )
              )
            , Deactivation(
                Block(
                  [ ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("overlay")), Id("onProviderDisabled")))
                      , [Lit(String([Chars("gps")]))]
                      )
                    )
                  ]
                )
              )
            , PartialMethodDec(
                PartialMethodHead(None(), AfterTiming(), Void(), Id("run"), [], None())
              , Block(
                  [ LocalVarDecStm(
                      LocalVarDec(
                        []
                      , ClassOrInterfaceType(TypeName(Id("Location")), None())
                      , [ VarDec(
                            Id("loc")
                          , Invoke(
                              Method(MethodName(AmbName(Id("overlay")), Id("getMyLocation")))
                            , []
                            )
                          )
                        ]
                      )
                    )
                  , ExprStm(
                      Invoke(
                        Method(
                          Invoke(
                            Method(MethodName(AmbName(Id("mapView")), Id("getController")))
                          , []
                          )
                        , None()
                        , Id("animateTo")
                        )
                      , [ExprName(Id("loc"))]
                      )
                    )
                  ]
                )
              )
            ]
          )
        , Layer(
            Id("WifiNavi")
          , [ Activation(
                Block(
                  [ ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("overlay")), Id("onProviderEnabled")))
                      , [Lit(String([Chars("Network")]))]
                      )
                    )
                  , ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("wifiManager")), Id("setWifiEnable")))
                      , [Lit(Bool(True()))]
                      )
                    )
                  ]
                )
              )
            , Deactivation(
                Block(
                  [ ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("overlay")), Id("onProviderDisabled")))
                      , [Lit(String([Chars("Network")]))]
                      )
                    )
                  , ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("wifiManager")), Id("setWifiEnable")))
                      , [Lit(Bool(False()))]
                      )
                    )
                  ]
                )
              )
            , PartialMethodDec(
                PartialMethodHead(None(), AfterTiming(), Void(), Id("run"), [], None())
              , Block(
                  [ LocalVarDecStm(
                      LocalVarDec(
                        []
                      , ClassOrInterfaceType(TypeName(Id("Location")), None())
                      , [ VarDec(
                            Id("loc")
                          , Invoke(
                              Method(MethodName(AmbName(Id("overlay")), Id("getMyLocation")))
                            , []
                            )
                          )
                        ]
                      )
                    )
                  , ExprStm(
                      Invoke(
                        Method(MethodName(AmbName(Id("buildingGuide")), Id("updateFloorPlan")))
                      , [ExprName(Id("loc"))]
                      )
                    )
                  ]
                )
              )
            ]
          )
        ]
      )
    )
  ]
)