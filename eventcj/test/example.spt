module test-example

language EventCJ

test previous example [[
package main;

direction Help{
	declare event E(Object o): after call(String[]  Cc*.m(String[])) && this(String[]) && target(o);
	transition E(Object o): Layer1 switchTo Layer2;
}

public class Test<T1,T2> extends String implements I1, I2, I3{
	layer L1{
		after void m1(Object o){}
	}
	void m1(Object o){}
	boolean m2(){return false;}
}

class Test{
	static void m(){}
	abstract void m();
}
]] 0 errors

test Storage[[
	package main;

direction StorageDir{
	declare event Activate(Storage s)
	: after call(void Storage.doSomething())
		&& target(s):sendTo(s);
	
	transition Activate():
		* activate cacheLayer;
	
}

public class Storage{
	layer cacheLayer{
		around void getItem(int key){
			System.out.println("Cache Lookup");
		}
	}
	
	void getItem(int key){
		System.out.println("Disk Lookup");
	}
	
	void doSomething(){}
	
	public static void main(String[] args){
		Storage s = new Storage();
		s.getItem(10);
		s.doSomething();
		s.getItem(10);
	}
}
]] 0 errors
