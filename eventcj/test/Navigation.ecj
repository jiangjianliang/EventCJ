package main;

class Navigation extends MapActivity implements Runnable, LocationListener{
	MapView mapView;
	MyLocationOverlay overlay;
	WifiManager wifiManager;
	BuildingGuide buildingGuide;
	
	void onStatusChanged(){
		
	}
	
	void run(){
		
	}
	
	void onCreate(Bundle status){
		overlay.runOnFirstFix(this);
		//...
	}
	
	layer GPSNavi{
		activate {
			overlay.onProviderEnabled("gps");
		}
		deactivate{
			overlay.onProviderDisabled("gps");
		}
		after void run(){
			Location loc = overlay.getMyLocation();
			mapView.getController().animateTo(loc);
		}
	}
	
	layer WifiNavi{
		activate{
			overlay.onProviderEnabled("Network");
			wifiManager.setWifiEnable(true);
		}
		deactivate{
			overlay.onProviderDisabled("Network");
			wifiManager.setWifiEnable(false);
		}
		after void run(){
			Location loc = overlay.getMyLocation();
			buildingGuide.updateFloorPlan(loc);
		}
	}
	
}